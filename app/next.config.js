const fs = require('fs');

const privateKeyFilepath = `${__dirname}/key`;
const privateKey = fs.existsSync(privateKeyFilepath)
  ? fs.readFileSync(privateKeyFilepath, 'utf8').trim()
  : '';

module.exports = {
  publicRuntimeConfig: {
    rewardContractAddress: '0x9abba8d75d538a2f74f5b519fcd0d95442051750',
    rewardContractABI: [{"type":"event","name":"Rebalanced","inputs":[{"type":"uint256","name":"newTotalSupply","internalType":"uint256","indexed":false},{"type":"address","name":"caller","internalType":"address","indexed":true}],"anonymous":false},{"type":"event","name":"StakingEpochFinished","inputs":[{"type":"uint256","name":"stakingEpoch","internalType":"uint256","indexed":true},{"type":"uint256","name":"totalStakeAmount","internalType":"uint256","indexed":false},{"type":"uint256","name":"exitMintAmount","internalType":"uint256","indexed":false},{"type":"address","name":"caller","internalType":"address","indexed":true}],"anonymous":false},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"COLLATERAL_MULTIPLIER","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"EXIT_MINT_RATE","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":"","internalType":"address"}],"name":"currencyRateChanger","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"ethUsd","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"ethUsdCurrent","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"exitCurrentSupply","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":"","internalType":"contract IExitToken"}],"name":"exitToken","inputs":[],"constant":true},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"finishStakingEpoch","inputs":[{"type":"uint256","name":"_totalStakeAmount","internalType":"uint256"}],"constant":false},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"_ethUsd","internalType":"uint256"},{"type":"uint256","name":"_ethUsdCurrent","internalType":"uint256"},{"type":"uint256","name":"_exitCurrentSupply","internalType":"uint256"},{"type":"uint256","name":"_lastStakingEpochFinished","internalType":"uint256"},{"type":"uint256","name":"_softETHCurrentSupply","internalType":"uint256"},{"type":"uint256","name":"_softETHExpectedSupply","internalType":"uint256"},{"type":"uint256","name":"_stakeUsd","internalType":"uint256"}],"name":"getCurrentDataBatch","inputs":[],"constant":true},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"initialize","inputs":[{"type":"address","name":"_staker","internalType":"address"},{"type":"address","name":"_currencyRateChanger","internalType":"address"},{"type":"address","name":"_exitToken","internalType":"contract IExitToken"},{"type":"address","name":"_softETHToken","internalType":"contract ISoftETHToken"}],"constant":false},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"lastStakingEpochFinished","inputs":[],"constant":true},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"rebalance","inputs":[],"constant":false},{"type":"function","stateMutability":"nonpayable","payable":false,"outputs":[],"name":"setSTAKEUSD","inputs":[{"type":"uint256","name":"_cents","internalType":"uint256"}],"constant":false},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"softETHCurrentSupply","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"softETHExpectedSupply","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":"","internalType":"contract ISoftETHToken"}],"name":"softETHToken","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"stakeUsd","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"address","name":"","internalType":"address"}],"name":"staker","inputs":[],"constant":true},{"type":"function","stateMutability":"view","payable":false,"outputs":[{"type":"uint256","name":"","internalType":"uint256"}],"name":"usdEthCurrent","inputs":[],"constant":true}],
    rpcURL: 'https://kovan.infura.io/v3/1125fe73d87c4e5396678f4e3089b3dd'
  },
  //ratioReadInterval: 600,  // 10 minutes (in seconds)
  //rebalanceInterval: 3600, // 1 hour (in seconds)
  ratioReadInterval: 60,  // for testing
  rebalanceInterval: 120, // for testing
  privateKey, // a private key of an account to send transactions from
  webpack: (config, { isServer }) => {
    // Fixes npm packages that depend on `fs` module
    if (!isServer) {
      config.node = {
        fs: 'empty'
      }
    }
    return config
  }
}
